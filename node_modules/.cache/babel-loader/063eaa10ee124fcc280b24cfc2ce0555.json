{"ast":null,"code":"var _jsxFileName = \"/Users/alisaloosen/Documents/GitHub/GalacticalShift/src/Components/EndPage.js\";\nimport React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { DATABASE_URL } from \"./config\";\nimport styles from \"./style/taskStyle.module.css\"; /////////////////////////////////////////////////////////////////////\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass EndPage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this._handleInstructKey = event => {\n      var key_pressed;\n\n      switch (event.keyCode) {\n        case 37:\n          //    this is left arrow\n          key_pressed = 4;\n          this.handleInstructLocal(key_pressed);\n          break;\n\n        case 39:\n          //    this is right arrow\n          key_pressed = 5;\n          this.handleInstructLocal(key_pressed);\n          break;\n\n        case 32:\n          //    this is SPACEBAR\n          key_pressed = 10;\n          this.handleInstructLocal(key_pressed);\n          break;\n\n        default:\n      }\n    };\n\n    const userID = this.props.location.state.userID;\n    const date = this.props.location.state.date;\n    const startTime = this.props.location.state.startTime;\n    const bonus = this.props.location.state.bonus; // This will change for the questionnaires going AFTER the main task\n\n    this.state = {\n      userID: userID,\n      date: date,\n      startTime: startTime,\n      instructScreenText: 1,\n      instructScreen: true,\n      feedback: [],\n      placeholder: \"Were the task instructions clear? Did you encounter any problems?\",\n      bonus: bonus\n    };\n    this.handleInstructLocal = this.handleInstructLocal.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleInstructLocal(key_pressed) {\n    var curText = this.state.instructScreenText;\n    var whichButton = key_pressed;\n\n    if (whichButton === 4 && curText > 1 && curText <= 3) {\n      this.setState({\n        instructScreenText: curText - 1\n      });\n    } else if (whichButton === 5 && curText < 3) {\n      this.setState({\n        instructScreenText: curText + 1\n      });\n    }\n  } // handle key key_pressed\n\n\n  // for the feedback box\n  handleChange(event) {\n    this.setState({\n      feedback: event.target.value\n    });\n  }\n\n  handleSubmit(event) {\n    var userID = this.state.userID;\n    let saveString = {\n      userID: this.state.userID,\n      date: this.state.date,\n      startTime: this.state.startTime,\n      feedback: this.state.feedback\n    };\n\n    try {\n      fetch(`${DATABASE_URL}/feedback/` + userID, {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(saveString)\n      });\n    } catch (e) {\n      console.log(\"Cant post?\");\n    }\n\n    alert(\"Thanks for your feedback!\");\n    event.preventDefault();\n    setTimeout(function () {\n      this.clearFb();\n    }.bind(this), 10);\n  }\n\n  clearFb() {\n    this.setState({\n      feedback: [],\n      placeholder: \"Thanks for your feedback!\"\n    });\n  }\n\n  openInNewTab(url) {\n    const newWindow = window.open(url, \"_blank\", \"noopener,noreferrer\");\n    if (newWindow) newWindow.opener = null;\n  }\n\n  componentDidMount() {\n    window.scrollTo(0, 0);\n  }\n\n  componentWillUnmount() {\n    // fix Warning: Can't perform a React state update on an unmounted component\n    this.setState = (state, callback) => {\n      return;\n    };\n  }\n\n  render() {\n    let text;\n\n    if (this.state.instructScreen === true) {\n      if (this.state.instructScreenText === 1) {\n        document.addEventListener(\"keyup\", this._handleInstructKey);\n        text = /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.main,\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: styles.likeP,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.center,\n              children: \"THANK YOU\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 15\n            }, this), \"Well done, you have earned \\xA3\", this.state.bonus, \" as a bonus!\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 15\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 22\n            }, this), \"Thanks for your help!\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 15\n            }, this), \"Your data makes an important contribution to our understanding of mental health.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 15\n            }, this), \"In the task, we were interested in how you make risky choices.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 15\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 22\n            }, this), \"Previous work have linked differences in behaviour to psychiatric disorders, \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 26\n            }, this), \"which we are aiming to understand better.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.centerTwo,\n              children: [\"[\", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"NEXT \\u2192\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 18\n              }, this), \"]\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this);\n      } else if (this.state.instructScreenText === 2) {\n        text = /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.main,\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: styles.likeP,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.center,\n              children: \"THANK YOU\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 15\n            }, this), \"If you feel that completing the questionnaires on any of the psychopathologies caused \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 40\n            }, this), \"you any distress, please use the following contact details for help and support.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n              children: \"Web page links (click to open in new tab):\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  onClick: () => {\n                    this.openInNewTab(\"https://www.nhs.uk/conditions/stress-anxiety-depression/mental-health-helplines/\");\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"u\", {\n                    children: \"NHS Mental Health Helplines\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 182,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 175,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  onClick: () => {\n                    this.openInNewTab(\"https://www.anxietyuk.org.uk\");\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"u\", {\n                    children: \"Anxiety UK\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 192,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 187,\n                  columnNumber: 19\n                }, this), \"\\xA0 (Helpline: 03444 775 774)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  onClick: () => {\n                    this.openInNewTab(\"https://www.ocduk.org/\");\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"u\", {\n                    children: \"OCD UK\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 203,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 19\n                }, this), \"\\xA0 (Helpline: 0333 212 7890)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  onClick: () => {\n                    this.openInNewTab(\"https://www.samaritans.org/\");\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"u\", {\n                    children: \"Samaritans\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 214,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 19\n                }, this), \"\\xA0 (Helpline: 116 123)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.centerTwo,\n              children: [\"[\", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\u2190 BACK\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 18\n              }, this), \"] [\", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"NEXT \\u2192\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 44\n              }, this), \"]\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this);\n      } else if (this.state.instructScreenText === 3) {\n        text = /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.main,\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: styles.likeP,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.center,\n              children: \"THANK YOU\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 15\n            }, this), \"We would love to hear any comments you have about the tasks you have completed.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 15\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 22\n            }, this), \"If you have any, please fill in the box below and click submit.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 15\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 22\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.centerThree,\n              children: /*#__PURE__*/_jsxDEV(\"form\", {\n                onSubmit: this.handleSubmit,\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n                    rows: \"5\",\n                    cols: \"50\",\n                    placeholder: this.state.placeholder,\n                    value: this.state.feedback,\n                    onChange: this.handleChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 239,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 238,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 247,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"submit\",\n                  value: \"Submit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 237,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.centerTwo,\n              children: [\"If you are ready to return to Prolific, press [\", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"SPACEBAR\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 17\n              }, this), \"] and follow the pop-up to complete the session.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 15\n            }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.centerTwo,\n              children: [\"[\\u2190 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"BACK\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 20\n              }, this), \"]\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }, this);\n      }\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.cockpit,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.textblock,\n        children: text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default _c = withRouter(EndPage);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/Users/alisaloosen/Documents/GitHub/GalacticalShift/src/Components/EndPage.js"],"names":["React","withRouter","DATABASE_URL","styles","EndPage","Component","constructor","props","_handleInstructKey","event","key_pressed","keyCode","handleInstructLocal","userID","location","state","date","startTime","bonus","instructScreenText","instructScreen","feedback","placeholder","bind","handleChange","handleSubmit","curText","whichButton","setState","target","value","saveString","fetch","method","headers","Accept","body","JSON","stringify","e","console","log","alert","preventDefault","setTimeout","clearFb","openInNewTab","url","newWindow","window","open","opener","componentDidMount","scrollTo","componentWillUnmount","callback","render","text","document","addEventListener","main","likeP","center","centerTwo","centerThree","cockpit","textblock"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { DATABASE_URL } from \"./config\";\nimport styles from \"./style/taskStyle.module.css\";\n/////////////////////////////////////////////////////////////////////\nclass EndPage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const userID = this.props.location.state.userID;\n    const date = this.props.location.state.date;\n    const startTime = this.props.location.state.startTime;\n    const bonus = this.props.location.state.bonus;\n\n    // This will change for the questionnaires going AFTER the main task\n    this.state = {\n      userID: userID,\n      date: date,\n      startTime: startTime,\n      instructScreenText: 1,\n      instructScreen: true,\n      feedback: [],\n      placeholder:\n        \"Were the task instructions clear? Did you encounter any problems?\",\n      bonus: bonus,\n    };\n\n    this.handleInstructLocal = this.handleInstructLocal.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleInstructLocal(key_pressed) {\n    var curText = this.state.instructScreenText;\n    var whichButton = key_pressed;\n\n    if (whichButton === 4 && curText > 1 && curText <= 3) {\n      this.setState({ instructScreenText: curText - 1 });\n    } else if (whichButton === 5 && curText < 3) {\n      this.setState({ instructScreenText: curText + 1 });\n    }\n  }\n\n  // handle key key_pressed\n  _handleInstructKey = (event) => {\n    var key_pressed;\n\n    switch (event.keyCode) {\n      case 37:\n        //    this is left arrow\n        key_pressed = 4;\n        this.handleInstructLocal(key_pressed);\n        break;\n      case 39:\n        //    this is right arrow\n        key_pressed = 5;\n        this.handleInstructLocal(key_pressed);\n        break;\n      case 32:\n        //    this is SPACEBAR\n        key_pressed = 10;\n        this.handleInstructLocal(key_pressed);\n        break;\n      default:\n    }\n  };\n\n  // for the feedback box\n  handleChange(event) {\n    this.setState({ feedback: event.target.value });\n  }\n\n  handleSubmit(event) {\n    var userID = this.state.userID;\n\n    let saveString = {\n      userID: this.state.userID,\n      date: this.state.date,\n      startTime: this.state.startTime,\n      feedback: this.state.feedback,\n    };\n\n    try {\n      fetch(`${DATABASE_URL}/feedback/` + userID, {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(saveString),\n      });\n    } catch (e) {\n      console.log(\"Cant post?\");\n    }\n\n    alert(\"Thanks for your feedback!\");\n    event.preventDefault();\n\n    setTimeout(\n      function () {\n        this.clearFb();\n      }.bind(this),\n      10\n    );\n  }\n\n  clearFb() {\n    this.setState({ feedback: [], placeholder: \"Thanks for your feedback!\" });\n  }\n\n  openInNewTab(url) {\n    const newWindow = window.open(url, \"_blank\", \"noopener,noreferrer\");\n    if (newWindow) newWindow.opener = null;\n  }\n\n  componentDidMount() {\n    window.scrollTo(0, 0);\n  }\n\n  componentWillUnmount() {\n    // fix Warning: Can't perform a React state update on an unmounted component\n    this.setState = (state, callback) => {\n      return;\n    };\n  }\n\n  render() {\n    let text;\n\n    if (this.state.instructScreen === true) {\n      if (this.state.instructScreenText === 1) {\n        document.addEventListener(\"keyup\", this._handleInstructKey);\n        text = (\n          <div className={styles.main}>\n            <span className={styles.likeP}>\n              <span className={styles.center}>THANK YOU</span>\n              <br />\n              Well done, you have earned £{this.state.bonus} as a bonus!\n              <br /> <br />\n              Thanks for your help!\n              <br />\n              <br />\n              Your data makes an important contribution to our understanding of\n              mental health.\n              <br />\n              <br />\n              In the task, we were interested in how you make risky choices.\n              <br /> <br />\n              Previous work have linked differences in behaviour to psychiatric\n              disorders, <br />\n              which we are aiming to understand better.\n              <br />\n              <br />\n              <span className={styles.centerTwo}>\n                [<strong>NEXT →</strong>]\n              </span>\n            </span>\n          </div>\n        );\n      } else if (this.state.instructScreenText === 2) {\n        text = (\n          <div className={styles.main}>\n            <span className={styles.likeP}>\n              <span className={styles.center}>THANK YOU</span>\n              <br />\n              If you feel that completing the questionnaires on any of the\n              psychopathologies caused <br />\n              you any distress, please use the following contact details for\n              help and support.\n              <br />\n              <br />\n              <i>Web page links (click to open in new tab):</i>\n              <ul>\n                <li>\n                  <span\n                    onClick={() => {\n                      this.openInNewTab(\n                        \"https://www.nhs.uk/conditions/stress-anxiety-depression/mental-health-helplines/\"\n                      );\n                    }}\n                  >\n                    <u>NHS Mental Health Helplines</u>\n                  </span>\n                </li>\n                <br />\n                <li>\n                  <span\n                    onClick={() => {\n                      this.openInNewTab(\"https://www.anxietyuk.org.uk\");\n                    }}\n                  >\n                    <u>Anxiety UK</u>\n                  </span>\n                  &nbsp; (Helpline: 03444 775 774)\n                </li>\n                <br />\n                <li>\n                  <span\n                    onClick={() => {\n                      this.openInNewTab(\"https://www.ocduk.org/\");\n                    }}\n                  >\n                    <u>OCD UK</u>\n                  </span>\n                  &nbsp; (Helpline: 0333 212 7890)\n                </li>\n                <br />\n                <li>\n                  <span\n                    onClick={() => {\n                      this.openInNewTab(\"https://www.samaritans.org/\");\n                    }}\n                  >\n                    <u>Samaritans</u>\n                  </span>\n                  &nbsp; (Helpline: 116 123)\n                </li>\n              </ul>\n              <span className={styles.centerTwo}>\n                [<strong>← BACK</strong>] [<strong>NEXT →</strong>]\n              </span>\n            </span>\n          </div>\n        );\n      } else if (this.state.instructScreenText === 3) {\n        text = (\n          <div className={styles.main}>\n            <span className={styles.likeP}>\n              <span className={styles.center}>THANK YOU</span>\n              <br />\n              We would love to hear any comments you have about the tasks you\n              have completed.\n              <br /> <br />\n              If you have any, please fill in the box below and click submit.\n              <br /> <br />\n              <span className={styles.centerThree}>\n                <form onSubmit={this.handleSubmit}>\n                  <label>\n                    <textarea\n                      rows=\"5\"\n                      cols=\"50\"\n                      placeholder={this.state.placeholder}\n                      value={this.state.feedback}\n                      onChange={this.handleChange}\n                    />\n                  </label>\n                  <br />\n                  <input type=\"submit\" value=\"Submit\" />\n                </form>\n              </span>\n              <span className={styles.centerTwo}>\n                If you are ready to return to Prolific, press [\n                <strong>SPACEBAR</strong>] and follow the pop-up to complete the\n                session.\n              </span>\n              &nbsp;\n              <span className={styles.centerTwo}>\n                [← <strong>BACK</strong>]\n              </span>\n            </span>\n          </div>\n        );\n      }\n    }\n\n    return (\n      <div className={styles.cockpit}>\n        <div className={styles.textblock}>{text}</div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(EndPage);\n"]},"metadata":{},"sourceType":"module"}